(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[75096],{453438:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(32425),o=n(325399),i=n(710159),a=n(855571),l=n(342548),u=n(112978),s=n(260259),c=n(674014),p=n(146846),d=n(907683),f=n(198873),h=n(885949);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b="appUpsellFooterViewPeriodStart",y=2592e5;function v(e){var t=e.onOpenInAppClick,n=(0,i.ZP)(),g=m((0,r.useState)(!1),2),v=g[0],x=g[1],w=(0,u.tc)("mweb_app_upsell_footer_v4"),_=function(){var e=(0,a.Z)(),t=(0,s.TH)(),n=(0,u.tc)("mweb_mini_renux")({dangerouslySkipActivation:!0}).anyEnabled,r=(0,u.tc)("mweb_app_upsell_footer_v4");return function(){if("undefined"==typeof window)return!1;if(e&&(0,d.wy)(t)&&n&&!(0,o.Z)())return!1;if(r().group.startsWith("enabled")){var i=Number((0,f.qn)(b))||null,a=i?Date.now()-i:null,l=!!a&&a<y,u=!(l||!a)&&a>5184e5;return i&&!u||(0,f.Nh)(b,Date.now()),!i||l||u}return(0,d.L6)(t)}}();return(0,h.jsx)(l.FixedFooter,{footerInLego:!0,appUpsellFooterConfig:{shouldShowAfterScroll:function(){v||(w(),x(!0));var e=_();return e&&(0,c.y)(),e}},hideOnScroll:!0,noPadding:!0,children:(0,h.jsx)(p.xu,{alignItems:"center",display:"flex",justifyContent:"around",marginEnd:4,marginStart:4,maxWidth:264,children:(0,h.jsx)(p.iP,{onTap:t,children:(0,h.jsxs)(p.xu,{alignItems:"center",display:"flex",paddingY:4,children:[(0,h.jsx)(p.xu,{marginEnd:2,children:(0,h.jsx)(p.JO,{accessibilityLabel:n._("Pinterest logo","AppUpsellFooter.icon","Pinterest logo icon for app upsell footer"),color:"red",icon:"pinterest",inline:!0,size:24})}),(0,h.jsx)(p.xv,{weight:"bold",children:w({dangerouslySkipActivation:!0}).anyEnabled?n._("Open in app","AppUpsellFooter.text.open","Short phrase for footer to upsell installing the app"):n._("Get the app","AppUpsellFooter.text","Short phrase for footer to upsell installing the app")})]})})})})}function x(e){var t=e.clientTrackingParams,n=e.onOpenInApp,r=e.viewParameter,o=e.viewType;return(0,h.jsx)(c.Z,{clientTrackingParams:t,viewParameter:r,viewType:o,children:(0,h.jsx)(v,{onOpenInAppClick:function(){(0,c.y)(),n()}})})}},325399:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(198873);function o(){var e=(0,r.qn)("lastViewedMiniRenux");return!!e&&Date.now()-Number(e)<2592e5}},875834:function(e,t,n){"use strict";var r=n(32425),o=n(314239),i=n.n(o);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(){var e=a((0,r.useState)(0),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=i()((function(){return n(window.scrollY)}),10);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),t}},64328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Pt}});var r=n(32425),o=n(762782),i=n(186964),a=n(53930),l=n(969758),u=n(260259),s=n(340813),c=n(20814),p=n(907683),d=function(e){var t,n=e.newLocation,r=e.oldLocation;return(t=n)&&!!t.key&&(0,p.L6)(n)&&((0,p.L6)(r)||(0,p.am)(r)||(0,p.cD)(r)||(0,p.En)(r))&&!(0,s.qn)("openUnauthType")&&!function(){if("undefined"==typeof window)return!1;var e=c.ZP.sessionStorage.getItem("susdst"),t=c.ZP.sessionStorage.getItem("susdd");return!!e&&!!t&&(new Date).getTime()-e<=t}()};function f(e){var t,n,o,i=e.context;return t={mobileSignupModalContext:i}.mobileSignupModalContext,n=(0,u.TH)(),o=(0,r.useRef)(n),(0,r.useEffect)((function(){var e,r,i,a=o.current,u=n;if(!(a===u||(r=a,i=u,r===i||r&&i&&r.pathname===i.pathname)||(e=u.pathname,e.includes("_created")||e.includes("boards")))){(0,l.C)(u);var s=t.showMobileSignupModal,c=t.dismissMobileSignupModal,p=t.incrementUpsellEligibleNavigationCount,f=t.upsellIsEnabledGlobally,h=t.upsellEligibleNavigationCount;t.modal.isShown?c():f()&&d({newLocation:u,oldLocation:a})&&(h>=3?s({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation",navigationTriggeredUpsell:{newLocation:u,oldLocation:a}}):p())}o.current=n}),[n,t]),null}var h=n(741874),m=n(151994),g=n(453438),b=n(319514),y=n(146846),v=n(911439),x=n(885949),w=function(e){var t=e.children,n=e.isOpen,r=e.onDismiss,o=e.type;return(0,x.jsx)(b.default,{accessibilityModalLabel:"",mobileAllowScroll:!0,mobileHideCloseIcon:!0,isOpen:n,modalStyle:{border:(0,v.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1},onDismiss:r,type:o,children:(0,x.jsx)(y.xu,{padding:4,children:t})})},_=n(710159),j=n(831166);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t,n=e.invite,o=(0,_.ZP)(),i=S((0,r.useState)(!0),2),a=i[0],l=i[1],s=(0,u.TH)(),c=(null==n||null===(t=n.sender)||void 0===t?void 0:t.first_name)||"",p=(0,j.U)().isNavFooterHiddenAfterScroll;return(0,x.jsx)(w,{isOpen:p&&a,onDismiss:function(){return l(!1)},type:"unauth_toast_upsell",children:(0,x.jsxs)(y.xu,{padding:2,children:[c&&(0,x.jsx)(y.xu,{marginBottom:4,children:(0,x.jsx)(y.xv,{overflow:"normal",weight:"bold",align:"center",children:o._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",c)})}),(0,x.jsx)(m.Z,{componentType:13404,within:"footer-banner",children:function(e){var t=e.handleOpenApp;return(0,x.jsx)(y.zx,{fullWidth:!0,color:"red",onClick:function(){return t({deepLinkUri:s.pathname.concat(s.search).substr(1)})},size:"md",text:o._("Open in app","Opens the Pin in the Pinterest app","Opens the Pin in the Pinterest app")})}})]})})}var I=n(156575),T=n(38268),A=n(899695),k=n(561230),E=n(71445),C=n(632589),D=n(54089),Z=n(123686);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=1e3,J={visible:{transform:"translateY(0)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},hiding:{transform:"translateY(350px)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},wash:{backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100%",touchAction:"none",width:"100%",zIndex:10001,position:"fixed",top:0,left:0},mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",touchAction:"none",width:"100%",zIndex:1}}},X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,e);var t,n,r,o=z(i);function i(){var e;U(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(N(e=o.call.apply(o,[this].concat(n))),"state",{visible:!1,hiding:!1,showWash:!1}),Y(N(e),"getTitle",(function(){var t=e.props.invite,n=t&&t.sender,r=n&&n.first_name;return e.props.i18n._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",r||"")})),Y(N(e),"getAvatar",(function(){var t=e.props.invite,n=t&&t.sender,r=n&&n.image_medium_url,o=n&&n.full_name;return(0,x.jsx)(I.Z,{src:r||"",name:o||"",size:"sm"})})),Y(N(e),"handleHide",(function(){var t=e.props.onDismiss;E.Z.increment("mweb_facebook_social_upsell.close"),e.setState({hiding:!0,showWash:!1}),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){t&&t()}),G)}))})),Y(N(e),"handleHideOutsideTap",(function(){var t=e.props.onDismiss;E.Z.increment("mweb_facebook_social_upsell.close.outside.modal"),e.setState({hiding:!0,showWash:!1}),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){t&&t()}),G)}))})),Y(N(e),"handleFBConnect",(function(e){E.Z.increment("mweb_facebook_social_upsell.fb_connect_button_click.".concat(e))})),Y(N(e),"handleSignupClick",(function(){E.Z.increment("mweb_facebook_social_upsell.signup_button_click"),e.props.history.push({pathname:"/",state:{from:e.props.location.pathname,next:e.props.location.pathname}})})),Y(N(e),"initializeShowAnimation",(function(){E.Z.increment("mweb_facebook_social_upsell.shown"),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){e.setState({visible:!0})}),G)}))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){E.Z.increment("mweb_facebook_social_upsell.land");var e=this.props.invite,t=e?e.invite_channel:null;t&&E.Z.increment("mweb_social_unauth.invite_channel.".concat(t)),this.initializeShowAnimation()}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.slideInAnimation)}},{key:"renderDefaultLoginHeader",value:function(){return(0,x.jsxs)(y.xu,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,justifyContent:"center",children:[(0,x.jsxs)(y.xu,{alignItems:"center",display:"flex",direction:"column",marginBottom:5,children:[(0,x.jsx)(y.xu,{children:(0,x.jsx)(y.xv,{align:"start",weight:"bold",children:(0,x.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._("Sign up to see more","Title on mobile web signup modal to prompt users to signup for Pinterest.","Title on mobile web signup modal to prompt users to signup for Pinterest.")})})}),(0,x.jsx)(y.xu,{marginBottom:1}),(0,x.jsx)(y.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,x.jsx)(y.xv,{align:"start",children:this.props.i18n._("Free, unlimited access to ideas","First value prop on mobile web sign up modal","First value prop on mobile web sign up modal")})})]}),(0,x.jsx)(y.iz,{})]})}},{key:"renderInviterHeader",value:function(){return(0,x.jsxs)(y.xu,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,children:[(0,x.jsxs)(y.xu,{alignItems:"center",direction:"row",display:"flex",paddingY:3,children:[(0,x.jsx)(y.xu,{children:(0,x.jsx)(y.xv,{align:"start",weight:"bold",children:(0,x.jsx)("span",{className:"deprecatedTextSizeXL",children:this.getTitle()})})}),(0,x.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"26%"}},children:this.getAvatar()})]}),(0,x.jsx)(y.iz,{})]})}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.invite,r=this.state,o=r.visible,i=r.hiding,a=r.showWash,l=C.Z.settings.LOGIN_URL,u=n?n.sender:null,s=o&&!i?J.visible:J.hiding;return(0,x.jsxs)(y.xu,{dangerouslySetInlineStyle:{__style:a?J.wash:{}},children:[o&&!i?(0,x.jsx)(A.Z,{onTouch:this.handleHideOutsideTap,pressState:"none",children:(0,x.jsx)(y.xu,{position:"fixed",top:!0,left:!0,opacity:1,dangerouslySetInlineStyle:{__style:J.mask.baseStyles}})}):null,(0,x.jsx)(y.xu,{position:"fixed",bottom:!0,color:"white",paddingX:6,width:"100%",zIndex:new y.Ry(10001),dangerouslySetInlineStyle:{__style:M(M({},s),{},{boxShadow:"0 1px 5px 0 rgba(0,0,0,0.25)",paddingBottom:"5%",paddingTop:"2%",touchAction:"none"})},children:(0,x.jsxs)(y.xu,{maxWidth:400,marginStart:"auto",marginEnd:"auto",children:[(0,x.jsx)(y.xu,{paddingY:2}),(0,x.jsx)(y.xu,{position:"absolute",left:!0,top:!0,marginStart:4,marginTop:2,children:(0,x.jsx)(T.Z,{accessibilityLabel:this.props.i18n._("Close modal","Close the modal for facebook upsell","Close the modal for facebook upsell"),icon:"cancel",onTouch:this.handleHide,size:"sm"})}),(0,x.jsx)(y.xu,{paddingY:2}),u?this.renderInviterHeader():this.renderDefaultLoginHeader(),(0,x.jsx)(y.xu,{marginBottom:1,height:40,children:(0,x.jsx)(k.Z,{facebookText:this.props.i18n._("Continue with Facebook","Button to login or signup with FB on Facebook","Button to login or signup with FB on Facebook"),from:t.pathname,next:t.pathname,fbButtonType:"continue",fbUseContinueAs:!0,fbConnectHandler:this.handleFBConnect})}),(0,x.jsx)(y.xu,{marginBottom:1,marginTop:2,children:(0,x.jsx)(y.zx,{fullWidth:!0,onClick:this.handleSignupClick,color:"gray",text:this.props.i18n._("Sign Up","Button to redirect user to Signup Page on mweb","Button to redirect user to Signup Page on mweb")})}),(0,x.jsx)(y.xu,{marginTop:3,children:(0,x.jsx)(y.xv,{color:"subtle",align:"center",size:"sm",children:(0,Z.nk)(this.props.i18n._("Have an account? {{ logIn }}","Asking users if they already have an account","Asking users if they already have an account"),{logIn:(0,x.jsx)(y.rU,{href:l,inline:!0,onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},children:(0,x.jsx)(y.xv,{color:"subtle",inline:!0,size:"sm",weight:"bold",children:this.props.i18n._("Log in","Mobile web link to log in page","Mobile web link to log in page")})})})})}),(0,x.jsx)(y.xu,{marginTop:3,children:(0,x.jsx)(D.Z,{size:"xs"})})]})})]})}}])&&F(t.prototype,n),r&&F(t,r),i}(r.PureComponent);var $=(0,u.EN)((function(e){var t=(0,_.ZP)();return(0,x.jsx)(X,M(M({},e),{},{i18n:t}))})),q=n(367),K=n(448906),V=n(99417);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ie(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(i,e);var t,n,r,o=re(i);function i(){var e;ee(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return le(ie(e=o.call.apply(o,[this].concat(n))),"handleJoinBoardClick",(function(t){var n=t.event;n&&n.stopPropagation&&n.stopPropagation();var r=e.props,o=r.history,i=r.socialCollabGroupBoardPath||"";E.Z.increment("mweb.social.group_board.public.modal.display"),o.push({pathname:"/signup/step1/",state:{next:i,isFromGroupBoardsInvite:!0}})})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.inviteObject,t=e?e.invite_channel:null;E.Z.increment("mweb.social.group_board.public.modal.display"),t&&E.Z.increment("mweb.social.group_board.public.invite_channel.".concat(t))}},{key:"render",value:function(){var e=this.props,t=e.viewType,n=e.viewParameter,r=e.inviteObject,o=e.board,i=r?r.sender:null,a=i?i.first_name:"",l=i?i.image_medium_url:"",u=i?i.full_name:"",s=a?this.props.i18n._("{{ name }} invited you to join their board","Mobile Modal prompting users to join a friends({{ name }}) board","Mobile Modal prompting users to join a friends({{ name }}) board").replace("{{ name }}",a):this.props.i18n._("Your friends invited you to join their board","Mobile Modal prompting users to join a friends board","Mobile Modal prompting users to join a friends board"),c=this.props.i18n._("Join board","Join Board Button","Join Board Button");return(0,x.jsx)(q.Z,{viewType:t||202,viewParameter:n,component:13196,children:(0,x.jsx)(w,{isOpen:!0,onDismiss:function(){},type:"groupboard_join",children:o?(0,x.jsxs)(y.xu,{padding:3,children:[(0,x.jsxs)(y.xu,{children:[(0,x.jsxs)(y.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,x.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"5%"}},width:"48px",children:(0,x.jsx)(I.Z,{src:l||"",name:u||""})}),(0,x.jsx)(y.xu,{maxWidth:"74%",children:(0,x.jsx)(y.xv,{align:"start",overflow:"normal",weight:"bold",children:s})})]}),(0,x.jsx)(y.xu,{marginBottom:4})]}),(0,x.jsx)(y.zx,{fullWidth:!0,text:c,color:"red",type:"button",onClick:this.handleJoinBoardClick})]}):(0,x.jsx)(y.xu,{padding:3,children:(0,x.jsx)(y.$j,{show:!0,accessibilityLabel:this.props.i18n._("Loading Board","Accessiblity label for Spinner searching for board","Accessiblity label for Spinner searching for board")})})})})}}])&&te(t.prototype,n),r&&te(t,r),i}(r.PureComponent);function se(e){var t=e.inviteObject,n=e.socialCollabGroupBoardPath,r=(0,_.ZP)(),i=(0,u.k6)(),a=(0,o.useSelector)((function(e){return e.session})).country,l=(0,V.SU)(),s=l.viewType,c=l.viewParameter,p=n&&n.split("?")[0]||"",d=(0,o.useSelector)((function(e){return(0,K.i3)(e)[p]}));return(0,x.jsx)(ue,{board:d,country:a,history:i,i18n:r,inviteObject:t,socialCollabGroupBoardPath:n,viewParameter:c,viewType:s})}var ce=n(724207),pe=n(260245),de=n(923337);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=6e5,je=function(e){return e>400},Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,n,r,o=be(i);function i(){var e;he(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(ve(e=o.call.apply(o,[this].concat(n))),"state",{isIdleTimerDeactivated:!1}),we(ve(e),"inactiveTime",0),we(ve(e),"handleIdleInactivity",(function(){var t=e.inactiveTime+500;E.Z.increment("mweb_unauth.idle_time.".concat(t)),e.inactiveTime=t,t>=_e&&e.handleIdleDeactivate()})),we(ve(e),"handleIdleDeactivate",(function(){e.state.isIdleTimerDeactivated||(clearInterval(e.idleId),e.setState({isIdleTimerDeactivated:!0}),window.removeEventListener("touchstart",e.handleIdleDeactivate),window.removeEventListener("touchend",e.handleIdleDeactivate),window.removeEventListener("touchcancel",e.handleIdleDeactivate),window.removeEventListener("touchmove",e.handleIdleDeactivate))})),we(ve(e),"handleThrottledScrollForSignupModal",(0,pe.Z)((function(t){var n=e.props.mobileSignupModalContext,r=n.showMobileSignupModal,o=n.upsellIsEnabledGlobally;!n.scrollControllerHasDisplayed&&je(t)&&o()&&r({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"scrollOnSharedPinPage"})}),500)),we(ve(e),"handleScroll",(function(){var t=e.getScrollPos();e.handleIdleDeactivate(),e.handleThrottledScrollForSignupModal(t)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.idleId=setInterval(this.handleIdleInactivity,500),window.addEventListener("scroll",this.handleScroll),window.addEventListener("touchstart",this.handleIdleDeactivate),window.addEventListener("touchend",this.handleIdleDeactivate),window.addEventListener("touchcancel",this.handleIdleDeactivate),window.addEventListener("touchmove",this.handleIdleDeactivate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),this.handleIdleDeactivate()}},{key:"getScrollPos",value:function(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}},{key:"render",value:function(){return(0,x.jsx)(y.xu,{})}}])&&me(t.prototype,n),r&&me(t,r),i}(r.Component);function Oe(){var e=(0,de.lv)();return e?(0,x.jsx)(Se,{mobileSignupModalContext:e}):null}var Pe=n(230555),Ie=n(824731),Te=n(875834),Ae=n(355247),ke=n(477783),Ee=n(371974),Ce=n(512318),De=n(740049),Ze=n(112978);function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Me=function(e){var t=e.onDismiss,n=(0,_.ZP)(),i=(0,u.TH)(),a=(0,V.SU)(),l=a.viewType,s=a.viewParameter,c=function(){var e=(0,u.TH)(),t=(0,u.UO)();return(0,o.useSelector)((function(n){var r,o=t.id&&n.pins[t.id],i=(0,K.i3)(n)[e.pathname],a=null==i||null===(r=i.cover_pin)||void 0===r?void 0:r.pin_id,l=a&&o&&n.pins[a],u=o||l,s=(0,Pe.Z)(u)||i&&i.image_cover_url||"";return s?{color:(u||{}).dominant_color,src:s}:null}))}(),p=(0,Ze.tc)("mweb_floating_app_upsell_right_side_cancel")().anyEnabled;return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(y.xu,{alignSelf:p?"end":"stretch","data-test-id":"cancel-button",display:p?"flex":"block",children:(0,x.jsx)(T.Z,{accessibilityLabel:n._("Cancel","unauth.mweb.floating_app_modal.cancel_button","Cancel IconButton on the floating app install modal prompting the users to download the app"),icon:"cancel",onTouch:function(e){var n=e;(0,De.tj)("mweb_unauth.float_app_upsell.dismiss_tap",{x:(null==n?void 0:n.pageX)||-1,y:(null==n?void 0:n.pageY)||-1}),(0,De.NC)("click_dismiss_float_app_upsell"),(0,ke.So)({component:13198,element:75,view_type:l,view_parameter:s}),(0,De.LW)({action:"click",page_location:i,item:"cancel-button",within:"unauth-floating-upsell"}),t()},size:"sm"})}),(0,x.jsxs)(y.xu,{children:[(0,x.jsxs)(y.xu,{"data-test-id":"interest-image",display:"flex",margin:2,children:[c&&(0,x.jsx)(y.xu,{minWidth:48,height:64,overflow:"hidden",rounding:2,marginEnd:4,children:(0,x.jsx)(y.Ee,{src:c.src,fit:"cover",naturalWidth:48,naturalHeight:64,color:c.color||"white",alt:"image"})}),(0,x.jsxs)(y.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,x.jsx)(y.xu,{children:(0,x.jsx)(y.xv,{weight:"bold",children:n._("Loving these ideas?","unauth.mweb.floating_app_modal.main_text","Top text on the floating app install modal prompting the users to download the app")})}),(0,x.jsx)(y.xv,{children:n._("Get the free Pinterest app to see more","unauth.mweb.floating_app_modal.main_text","Top text on the floating app install modal prompting the users to download the app")})]})]}),(0,x.jsx)(y.xu,{alignItems:"center",alignSelf:"center","data-test-id":"download-button",display:"flex",direction:"row",justifyContent:"center",marginBottom:3,marginStart:4,marginEnd:4,wrap:!0,children:(0,x.jsx)(m.Z,{componentType:13198,within:"unauth-floating-upsell",children:function(e){var t=e.handleOpenApp;return(0,x.jsx)(y.zx,{color:"red",onClick:function(){return t()},size:"md",text:n._("Download app","unauth.mweb.floating_app_modal","CTA on the app upsell modal")})}})})]})]})},Ue=function(){var e=(0,_.ZP)(),t=(0,u.TH)();return(0,x.jsxs)(y.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:2,paddingY:4,children:[(0,x.jsx)(y.xu,{flex:"grow",children:(0,x.jsxs)(y.xu,{marginBottom:6,children:[(0,x.jsx)(y.xu,{marginBottom:2,children:(0,x.jsx)(y.X6,{overflow:"normal",size:"sm",align:"center",children:e._("You are signed out","Heading on the bottom right upsell suggesting user is not signed in","Heading on the bottom right upsell suggesting user is not signed in")})}),(0,x.jsx)(y.xv,{overflow:"normal",align:"center",children:e._("Sign in to get the best experience","Subheader value prop on the bottom right upsell","Subheader value prop on the bottom right upsell")})]})}),(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(k.Z,{facebookText:e._("Continue with Facebook","tablet.bottomrightupsell.loginbuttons","Facebook login button on mweb tablet bottom right upsell"),googleText:e._("Continue with Google","tablet.bottomrightupsell.loginbuttons","Google login button on mweb tablet bottom right upsell"),lineText:e._("Continue with LINE","tablet.bottomrightupsell.loginbuttons","Line login button on mweb tablet bottom right upsell"),showEmailButton:!0,showLoginButtons:!1,next:(0,Ae.Yy)(t)}),(0,x.jsx)(y.xu,{paddingX:6,marginTop:-3,children:(0,x.jsx)(D.Z,{})})]})]})};function Fe(e){var t=e.onDismiss,n=(0,Ce.a)(),o=!(null==n||!n.hasScrolledPastMainContent),i=!(null==n||!n.hasDraggedDrawerToFullScreen),a=(0,Ee.Wb)(),l=(0,u.TH)(),s=(0,Te.Z)(),c=Le((0,r.useState)(!1),2),d=c[0],f=c[1],h=(0,V.SU)(),m=h.viewType,g=h.viewParameter,b=(0,Ze.tc)("lex_bottom_align_app_upsell"),v=((0,Ze.aq)("mweb_better_related_pins_drawer").group||"").includes("draggable"),w=(0,p.uM)(l);return(0,r.useEffect)((function(){w?f(o||v&&i):s>200?f(!0):a&&f(!1)}),[s,a,o,v,i,w]),(0,x.jsx)(q.Z,{viewType:m||202,viewParameter:g,component:13130,children:(0,x.jsx)(y.xu,{borderStyle:"shadow","data-test-id":"floating-app-upsell",rounding:a?6:8,padding:a?4:2,display:"flex",direction:"column",top:!(a||b().anyEnabled),bottom:a||b().anyEnabled,left:!a,right:!0,marginStart:a?0:"auto",marginEnd:a?4:"auto",maxWidth:a?350:360,justifyContent:a?"center":void 0,alignItems:a?"center":void 0,color:"white",opacity:1,zIndex:new y.Ry(1e4),dangerouslySetInlineStyle:{__style:{transition:"transform 225ms ease-in-out",transform:a||"enabled_sticky"!==b().group?"enabled"===b().group?"translateY(".concat(d?0:a?145:120,"%)"):"translateY(".concat(d?0:a?145:-120,"%)"):void 0,marginBottom:a?84:void 0}},position:"fixed",children:a?(0,x.jsx)(Ue,{}):(0,x.jsx)(Me,{onDismiss:t})})})}function Re(e){var t=e.setShouldShowAppUpsellFooter,n=(0,V.SU)(),o=n.viewType,i=n.viewParameter,a=Le((0,r.useState)(!1),2),l=a[0],u=a[1],s=(0,Ie.Z)(),c=(0,Ee.Wb)(),p=(0,Ze.tc)("pcons_footer_after_dismiss");return(0,x.jsx)(q.Z,{viewType:o||202,viewParameter:i,component:13198,children:(0,x.jsx)(y.xu,{children:s&&!l&&(0,x.jsx)(Fe,{onDismiss:function(){u(!0),!c&&p().anyEnabled&&t&&t()}})})})}var ze=n(540690),He=n(51834),Ne=n(476891),We=function(){var e=(0,o.useSelector)((function(e){var t=e.session;return(0,He.Xn)((0,He.an)(t.referrer))})),t=(0,o.useSelector)((function(e){var t=e.session;return t.unauthSavePinId&&!t.isAuthenticated})),n=(0,o.useSelector)((function(e){var t=e.session;return t.unauthFollowUserId&&!t.isAuthenticated})),r=(0,o.useDispatch)();return function(){t&&r((0,Ne.n1)()),n&&r((0,Ne.EL)()),(0,De.NC)("hide_dismissable_modal"),(0,De.My)("mweb.unauth_dismiss_modal");var o,i,a=c.ZP.sessionStorage.getItem("sumdc")||0;a+=1,c.ZP.sessionStorage.setItem("sumdc",a),e&&1===a&&(o=6e4,i="susdd",c.ZP.sessionStorage.getItem(i)||c.ZP.sessionStorage.setItem(i,o),c.ZP.sessionStorage.setItem("susdst",(new Date).getTime()))}},Ye=n(914861),Ge=n(5161),Je=n(660727);function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qe=[5,18,17,6,19],Ke=(0,r.lazy)((function(){return n.e(86560).then(n.bind(n,174231))})),Ve=function(e){var t=e.invite,n=We(),r=(0,Ee.ZP)(),o=(0,de.lv)();if(!o||!o.modal.isShown)return null;var i=o.dismissMobileSignupModal,l=o.modal.displayProps;return(0,x.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_SignupModal",children:(0,x.jsx)(h.Z,{fallback:(0,x.jsx)(y.xu,{}),children:(0,x.jsx)(Ke,{displayProps:l,inviteObject:l.isScrollingModal?t:void 0,isTablet:"tablet"===r,onDismiss:function(){i(),l.isScrollingModal||n()}})})})};function Qe(){var e=(0,u.TH)(),t=function(){var e=(0,Je.vE)(),t=(0,u.TH)(),n=t===Xe((0,r.useState)(t),1)[0]&&(0,p.Fw)(t)||null,o=Xe((0,r.useState)(null),2),i=o[0],a=o[1];return(0,Ye.Z)((function(){e&&n&&ce.ZP.create("InviteCodeMetadataResource",{invite_code:e}).callGet().then((function(e){var t,n;return a(null!==(t=null===(n=e.resource_response)||void 0===n?void 0:n.data)&&void 0!==t?t:null)})).catch((function(){}))})),e&&n?{invite:i,pageType:n}:null}(),n=(0,o.useDispatch)(),i=(0,ze.Z)(),l=(0,o.useSelector)((function(e){return e.session.unauthInterstitialDismissed})),s=(0,Ge.Z)()&&!l,c=Xe((0,r.useState)(!1),2),d=c[0],f=c[1],b=(0,de.lv)(),v=Xe((0,r.useState)(!1),2),w=v[0],_=v[1],j=!(null==b||!b.modal.isShown),S=(0,V.SU)().viewType;(0,r.useEffect)((function(){j&&(_(!0),n((0,Ne.W)()))}),[j,n]);var O=j&&(0,x.jsx)(Ve,{});if(!O&&t&&t.invite){var I,T=t.invite,A=t.pageType;"board"===A&&4===(null===(I=T.sender)||void 0===I?void 0:I.invite_category)?O=(0,x.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_GroupBoardsJoinModal",children:(0,x.jsx)(h.Z,{children:(0,x.jsx)(se,{inviteObject:T,socialCollabGroupBoardPath:"".concat(e.pathname).concat(e.search)})})}):qe.includes(T.invite_channel)&&!w?O=(0,x.jsx)($,{invite:T,onDismiss:function(){return _(!0)}}):"profile"!==A&&i&&(O=(0,x.jsx)(P,{invite:T}))}return(0,x.jsxs)(r.Fragment,{children:[s&&(0,x.jsx)(Re,{setShouldShowAppUpsellFooter:function(){return f(!0)}}),d&&i&&(0,x.jsx)(m.Z,{within:"footer-button",children:function(e){var t=e.handleOpenApp;return(0,x.jsx)(g.Z,{onOpenInApp:function(){return t()},viewType:S})}}),(0,x.jsxs)(y.xu,{children:["pin"===(null==t?void 0:t.pageType)&&(0,x.jsx)(Oe,{}),O]})]})}var et=n(738453),tt=n(225628),nt=n(402825);var rt=n(474809),ot=n(886345),it=n(524138),at=n(498177),lt=n(484951),ut=n(647136),st=n(10970),ct=n(358142),pt=n(735767);function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ht="keychainAutologinDisabled",mt="mweb.unauth.ios_keychain_autologin";function gt(){var e=dt((0,r.useState)(""),2),t=e[0],n=e[1],i=dt((0,r.useState)(""),2),a=i[0],l=i[1],c=(0,r.useRef)(!1),p=!!t&&!!a,d=(0,r.useRef)(),f=(0,o.useDispatch)(),h=(0,u.k6)(),m=(0,u.TH)(),g=(0,_.ZP)(),b=(0,ct.F9)().showToast,v=(0,Ze.tc)("mweb_unauth_shared_page_wrapper_autologin");(0,r.useEffect)((function(){d.current&&d.current.focus()}),[]);var w=function(e){var t=e.errorReason,n=e.errorCode,r=e.errorMessage,o=t||n===pt.oP?"invalid_password":n===pt.hU?"invalid_email":"login";(0,De.My)("".concat(mt,".failure.").concat(o)),(0,s.Nh)(ht,!0),h.push({pathname:"/login",state:{keychainiOSAutologinError:{code:n,message:r}}})},j=function(e){(0,ke.j)({event_type:e,view_type:9,view_parameter:63,aux_data:{signup_login_method:1}})};(0,r.useEffect)((function(){c.current!==p&&(c.current=p,(0,s.Nh)(ht,!0),f((0,st.x4)({username_or_email:t,password:a},h,m.pathname,{isAutologin:!0},v)).then((function(){b((function(e){var t=e.onHide;return(0,x.jsx)(ut.ZP,{text:g._("You're logged in!","mweb.unauth.ios_keychain_autologin.login_success_toast","Toast to alert user they are being logged in"),onHide:t})})),(0,De.My)("".concat(mt,".login_success")),j(7536)})).catch((function(e){j(7535),w({errorCode:e.apiErrorCode,errorMessage:e.message})})))}));var S=function(e){var t=e.value,r=e.type;1!==t.length?"email"===r?n(t):l(t):w({errorReason:"manual_input_attempt"})},O=function(){p||(0,De.My)("".concat(mt,".failure.user_dismissed_prompt")),(0,s.Nh)(ht,!0)};return(0,x.jsx)(y.xu,{position:"absolute",top:!0,opacity:0,dangerouslySetInlineStyle:{__style:{zIndex:-100}},children:(0,x.jsxs)("form",{onSubmit:function(e){e.preventDefault()},autoComplete:"on","aria-hidden":"true",children:[(0,x.jsx)(y.nv,{autoComplete:"username",id:"username",onChange:function(e){var t=e.value;return S({value:t,type:"email"})},ref:d,size:"lg",type:"email",value:t,onBlur:O}),(0,x.jsx)(y.nv,{autoComplete:"current-password",id:"current-password",onChange:function(e){var t=e.value;return S({value:t,type:"password"})},size:"lg",type:"password",value:a,onBlur:O})]})})}var bt=n(198873),yt=n(256191);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=(0,r.lazy)((function(){return n.e(86365).then(n.bind(n,586365))})),jt=(0,r.lazy)((function(){return n.e(35743).then(n.bind(n,797835))})),St=function(){try{var e=JSON.parse((0,bt.qn)("unauthRevisitation")),t=e.count,n=e.time;return"number"==typeof t&&"number"==typeof n?{count:t,time:n}:null}catch(r){return null}},Ot=function(e){(0,bt.Nh)("unauthRevisitation",JSON.stringify(e))};function Pt(){var e=(0,Ee.ZP)(),t=(0,u.k6)(),n=(0,u.TH)(),c=(0,lt.U)(),d=(0,Ze.tc)("mweb_lex_facebook_one_tap");(0,r.useEffect)((function(){c&&setTimeout((function(){c.load(new URL("login.js","file://"))}),500)}),[]);var m=(0,o.useSelector)((function(e){return e.session})),g=m.browser,b=m.googleOneTapShouldBeHidden,y=m.isSeoBot,v=m.referrer,w=(0,de.lv)(),_=n&&n.search?(0,at.mB)(n.search):"",j=!!_&&"1"===_.ur,S=(0,r.useRef)(!1);(0,r.useEffect)((function(){!S.current&&j&&(0,l.C)(n),S.current=j})),(0,r.useEffect)((function(){(0,De.hL)("mweb.unauth_seo.referrer",{referrer:v,docReferrer:document.referrer,cookieReferrer:i.U2(yt.tg)})}),[v]),function(){var e=(0,o.useSelector)((function(e){return e.session})),t=e.unauthId,n=e.country,i=e.isSeoBot,a=e.region_from_ip;(0,r.useEffect)((function(){(0,nt.c_)({country:n,isBot:i})&&(0,tt.X)({id:et.Un,eventName:"Mobile"}),(0,nt.$r)({country:n,regionFromIp:a,isBot:i})&&(0,tt.Kv)({id:"flashtalking-m-ses",eventName:"Mobile"}),(0,nt.NR)(n,a,i)&&t&&(0,tt.kQ)({unauthId:t}),(0,nt.Fc)({country:n,isBot:i})&&t&&(0,tt.o4)({unauthId:t})}),[n,t,i,a])}(),function(){var e=(0,u.TH)(),t=(0,o.useDispatch)(),n=(0,o.useSelector)((function(e){return e.session})),r=n.isSeoBot,a=n.userAgent;(0,Ye.Z)((function(){if((e.search||"").includes("amp_client_id")&&(0,De.My)("amp_duplo_redirect"),!r){t((0,rt.pz)([1000180],r)),(0,Ae.Yi)().then((function(e){t((0,Ne.iW)(e))}),(function(e){t((0,Ne.iW)())}));var n=St();!n||n.count<1||!n.time?Ot(n={count:1,time:0}):(new Date).getTime()-n.time>6e5&&(n=xt(xt({},n),{},{count:n.count+1}),Ot(n)),(0,ke.j)({event_type:7686,view_type:51,aux_data:{unauth_revisitation:n.count,unauth_previously_logged_out:i.U2(yt.e7)}}),window.addEventListener("unload",(function(){var e,t;Ot({count:null!==(e=null===(t=St())||void 0===t?void 0:t.count)&&void 0!==e?e:1,time:(new Date).getTime()})}))}(0,ot.$)(a)&&(0,s.Nh)("openUnauthType",it.zu)}))}();var O=!y&&"Mobile Safari"===g&&((0,p.bo)(n)||(0,p.J3)(n)||(0,p.uM)(n)||(0,p.am)(n))&&!(0,s.qn)(ht,!1),P=!(b||(0,p.re)(n)||(0,p.OK)(n)||(0,p.Ni)(n)||"desktop"===e&&((0,p.C$)(n)||(0,p.Xn)(n)||(0,p.HV)(n)||(0,p.kY)(n)||"/invited"===n.pathname||n.pathname.startsWith("/about/")));return(0,x.jsxs)(r.Fragment,{children:[!(0,p.re)(n)&&(0,x.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_AutoLogin",children:(0,x.jsx)(h.Z,{children:(0,x.jsx)(_t,{crossDomain:!0,fb:!0,google:!0,history:t,location:n,activateLEXFacebookOneTapExperiment:d,smartlock:!0})})}),P&&(0,x.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_GoogleOneTap",children:(0,x.jsx)(h.Z,{children:(0,x.jsx)(jt,{})})}),O&&(0,x.jsx)(gt,{}),"desktop"!==e&&(0,x.jsx)(Qe,{}),w&&(0,x.jsx)(f,{context:w})]})}},314239:function(e,t,n){var r=n(272347),o=n(563668);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/UnauthPageWrapperFooter-2dfcee1cfe4ec8e1.js.map
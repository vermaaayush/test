(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[61230],{182666:function(e){e.exports="https://s.pinimg.com/webapp/btn_base-3772d107.png"},451874:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var o=n(32425),r=n(762782),i=n(943995),a=n(740049),s=n(112978),c=n(710159),u=n(977816),l=n(146846),p=n(885949);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#1877F2",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",minWidth:"240px",borderRadius:"20px",padding:"0px 0px 0px 8px"},roundedButton:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",border:"none",height:"48px",transition:"opacity .2s linear",width:"48px",marginBottom:"8px",borderRadius:"50%"},buttonText:{fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"8px",letterSpacing:"0.25px"}},j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,o,r=y(s);function s(){var e;h(this,s);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return _(w(e=r.call.apply(r,[this].concat(n))),"state",{fbReady:!1,showSocialAuthDisabledModal:!1}),_(w(e),"connectCallback",(function(t){var n=t.creds,o=t.data;e.props.onFacebookConnectSuccess(n,o)})),_(w(e),"handleConnectClick",(function(){(0,a.My)("unauth_mweb.facebook_connect.button_click");var t=e.props,n=t.onTouch,o=t.mwebFacebookDisabled;n&&n(),o?e.setState({showSocialAuthDisabledModal:!0}):e.state.fbReady&&(0,u.JF)().then(e.connectCallback,e.props.onFacebookConnectError)})),_(w(e),"renderRoundButton",(function(){return(0,p.jsxs)(l.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,p.jsx)("button",{onClick:e.handleConnectClick,style:k.roundedButton,type:"button",children:(0,p.jsx)(l.JO,{accessibilityLabel:e.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:20})}),(0,p.jsx)(l.xv,{color:"inverse",size:"md",children:e.props.i18n._("Facebook","Facebook company name","Facebook company name")})]})})),e}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.mwebFacebookDisabled||((0,u.we)(this.props.locale).then((function(){e.setState({fbReady:!0})})),window.addEventListener("message",this.handleMessageEvent,!1))}},{key:"handleMessageEvent",value:function(e){(0,u.s0)(e,(function(e){return(0,a.My)("unauth_mweb.".concat(e))}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessageEvent)}},{key:"renderPersonalizedButton",value:function(){var e=this,t=this.props.isRerequest,n="".concat(this.props.type||"continue","_with"),o="rounded",r=this.props.fbUseContinueAs?"true":"false";return(0,p.jsxs)(l.xu,{bottom:!0,left:!0,right:!0,top:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",rounding:5,children:[t?(0,p.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":n,"data-layout":o,"data-show-faces":"false","data-auth-type":"rerequest","data-scope":u.$.join(","),"data-auto-logout-link":"false","data-use-continue-as":r}):(0,p.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":n,"data-layout":o,"data-show-faces":"false","data-scope":u.$.join(","),"data-auto-logout-link":"false","data-use-continue-as":r}),this.state.showSocialAuthDisabledModal&&(0,p.jsx)(i.Z,{type:"facebook",onDismiss:function(){return e.setState({showSocialAuthDisabledModal:!1})}})]})}},{key:"render",value:function(){var e=this;return this.props.isRounded?this.renderRoundButton():(0,p.jsxs)(l.xu,{position:"relative","data-test-id":"FacebookConnectContainer",children:[this.renderPersonalizedButton(),(0,p.jsxs)("button",{onClick:this.handleConnectClick,style:k.defaultButton,type:"button","data-test-id":"FacebookConnectButton",children:[(0,p.jsx)(l.xu,{color:"white",rounding:3,dangerouslySetInlineStyle:{__style:{paddingTop:"5px",paddingLeft:"3px",paddingRight:"2px",marginLeft:"4px",marginRight:"4.4px"}},children:(0,p.jsx)(l.JO,{accessibilityLabel:this.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:19})}),(0,p.jsx)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",flex:"grow",marginEnd:1,children:(0,p.jsx)("span",{style:k.buttonText,children:this.props.buttonText})})]}),this.state.showSocialAuthDisabledModal&&(0,p.jsx)(i.Z,{type:"facebook",onDismiss:function(){return e.setState({showSocialAuthDisabledModal:!1})}})]})}}])&&b(t.prototype,n),o&&b(t,o),s}(o.Component);function S(e){var t=(0,c.ZP)(),n=(0,r.useSelector)((function(e){return e.session})).locale,o=(0,s.aq)("mweb_facebook_disabled").anyEnabled;return(0,p.jsx)(j,g(g({},e),{},{i18n:t,locale:n,mwebFacebookDisabled:o}))}},561230:function(e,t,n){"use strict";n.d(t,{Z:function(){return ee}});var o=n(32425),r=n(762782),i=n(451874),a=n(938913),s=n(475439),c=n(899695),u=n(143010),l=n(958140),p=n(182666),d=n.n(p),f=n(632589),g=n(914861),h=n(710159),b=n(498177),m=n(740049),y=n(112978),x=n(952733),w=n(198873),v=n(146846),_=n(885949),k={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#00C300",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",borderRadius:"20px",padding:"0px 0px 0px 8px"},lineLogo:{borderRadius:"12px",backgroundColor:"#00C300",width:"32px",height:"32px"},buttonText:{fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"33px"}},j=function(e){var t,n=e.buttonText,o=e.onLineConnectSuccess,r=e.onLineConnectError,i=e.onTouch,a=(0,h.ZP)(),s=(0,y.tc)("mweb_line_oauth_jp")().anyEnabled,c=(0,y.tc)("mweb_line_oauth_jp_android")().anyEnabled,p=s||c,j=(0,l.Z)(10),S=(0,x.B)().locale,E=function(e){var n=(0,b.mB)(e);if(n.state&&n.code&&n.state===j){t&&!t.closed&&t.close();var i="".concat(window.location.origin,"/oauth/line/redirect");(0,u.Z)({url:"/oauth/line/verify",type:"POST",data:{code:n.code,redirect_uri:i}}).promise.then((function(e){var t=e.ok,n=e.responseText;if(t&&n){var i=JSON.parse(n),a=i.id_token,s=i.access_token;a&&s&&o({line_id_token:a,line_access_token:s},{line_id_token:a,line_access_token:s})}else r()}))}},T=function(e){e.isTrusted&&e.origin===window.location.origin&&e.data&&E(String(e.data))},L=function(e){if(e.isTrusted&&e.url.startsWith(window.location.origin)&&"lineOAuthOneTimeCode"===e.key){var t=(0,w.qn)("lineOAuthOneTimeCode");t&&E(t)}};(0,g.Z)((function(){return function(){window.removeEventListener("message",T),window.removeEventListener("storage",L),(0,w.L_)("lineOAuthOneTimeCode"),t&&!t.closed&&t.close()}}));var O=k.defaultButton;return p?(0,_.jsx)(v.xu,{position:"relative","data-test-id":"LineConnectContainer",children:(0,_.jsxs)("button",{onClick:function(){(0,m.My)("unauth_mweb.line_connect.button_click"),i&&i();var e="".concat(window.location.origin,"/oauth/line/redirect");window.addEventListener("message",T,!1),window.addEventListener("storage",L),t=window.open("https://access.line.me/oauth2/v2.1/authorize?response_type=code"+"&client_id=".concat(f.Z.settings.LINE_CLIENT_ID)+"&redirect_uri=".concat(encodeURIComponent(e))+"&state=".concat(j)+"&ui_locales=".concat(S)+"&scope=profile%20openid%20email","_blank")},style:O,type:"button","data-test-id":"line-connect-button",children:[(0,_.jsx)("img",{style:k.lineLogo,src:d(),alt:a._("line","accessible label for line icon","accessible label for line icon")}),(0,_.jsx)(v.kC,{alignItems:"center",justifyContent:"center",flex:"grow",children:(0,_.jsx)("span",{style:k.buttonText,children:n})})]})}):null},S=n(647136),E=n(371974),T=n(593720),L=n(977816),O=n(899518),C=n(781228),P=n(10970),B=n(498444),R=n(69532),A=n(476891),F=n(484951),D=n(524138),Z=n(735767),I=n(638137),M=n(477783),N=n(358142),z=n(260259);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=V(e);if(t){var r=V(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(l,e);var t,n,r,u=K(l);function l(){var e;G(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q($(e=u.call.apply(u,[this].concat(n))),"state",{isLoading:!1,showRegisterLoading:!1,signupPlatform:"default"}),Q($(e),"onRegisterSuccess",(function(t){var n=e.props.next;e.trackSignupLoginEvent(7487,t),["facebook","google"].includes(t)&&(n&&e.props.history.push(n),e.props.history.push("/")),e.setState({showRegisterLoading:!1})})),Q($(e),"onRegisterFailure",(function(t,n){e.trackSignupLoginEvent(7488,n),e.props.showToast((function(n){var o=n.onHide;return(0,_.jsx)(S.ZP,{text:t.message||e.props.i18n._("Sorry! Something went wrong on our end.","Error logging on","Error logging on"),onHide:o})})),e.setState({isLoading:!1,showRegisterLoading:!1})})),Q($(e),"handlePostLoginRegistration",(function(t,n){var o=e.props,r=o.beforeRegister,i=o.isSignupConfirmationExpEnabled;r&&i().anyEnabled?r(t,n):n()})),Q($(e),"onLoginError",(function(t,n,o,r){e.setState({isLoading:!1}),!n||n.apiErrorCode!==Z.xN&&n.apiErrorCode!==Z.lg&&n.apiErrorCode!==Z.Pv?n?((0,m.My)("mweb_login_button_skip_register.api_error_code.".concat(n.apiErrorCode)),e.props.showToast((function(t){var o=t.onHide;return(0,_.jsx)(S.ZP,{text:n.apiErrorCode&&n.message?n.message:e.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in."),onHide:o})}))):((0,m.My)("unauth_mweb.login.unexpected_error"),e.props.showToast((function(t){var n=t.onHide;return(0,_.jsx)(S.ZP,{text:e.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in."),onHide:n})}))):"line"===r||o.email||o.gplus_id_token?"line"===r?n.apiErrorCode===Z.Pv?e.redirectToLineEmailCollect(o):e.registerAfterLoginError(t,n,o,r):e.handlePostLoginRegistration(o.email||"",(function(){return e.registerAfterLoginError(t,n,o,r)})):(0,L.uP)("email").then((function(i){var a=i.hasPerm;e.handlePostLoginRegistration("",(function(){return e.redirectToEmailCollect(o,t,n,r)})),(0,m.My)("unauth_mweb.reg_via_fb.has_email_perm.".concat(String(!!a)))})).catch((function(i){e.handlePostLoginRegistration("",(function(){return e.registerAfterLoginError(t,n,o,r)}))}))})),Q($(e),"getAuxDataSignupLoginMethod",(function(e){switch(e){case"facebook":return 2;case"google":return 3;case"line":return 8;default:return}})),Q($(e),"getViewParameterType",(function(e){switch(e){case"facebook":return 3205;case"google":return 3204;case"line":return 3556;default:return}})),Q($(e),"trackSignupLoginEvent",(function(t,n){var o=e.props,r=o.isAuthenticated,i=o.isLimitedLoginUser;(0,M.j)({event_type:t,view_type:10,view_parameter:e.getViewParameterType(n),aux_data:W(W({},r?{login_state:i?2:1}:{}),{},{signup_login_method:e.getAuxDataSignupLoginMethod(n)})})})),Q($(e),"trackButtonTap",(function(t){var n=e.props,o=n.isAuthenticated,r=n.isLimitedLoginUser,i=n.viewParameter;(0,M.So)({view_type:10,view_parameter:i,element:t,aux_data:W({},o?{login_state:r?2:1}:{})})})),Q($(e),"registerAfterLoginError",(function(t,n,o,r){var i=e.props,a=i.activateMobileObligatoryAgeExp,s=i.flushExp;e.includeAgeStep(r,o)&&("line"!==r||a().anyEnabled)?(s(),e.props.history.push({pathname:"/signup/thirdpartyage/",state:{signupOptions:o,signupPlatform:r}})):("facebook"===r&&o.birthday&&(o.birthday=String((0,I.r)(o.birthday||""))),e.setState({isLoading:!0,showRegisterLoading:!0,signupPlatform:r}),e.trackSignupLoginEvent(7537,r),e.props.register(o).then((function(t){return e.onRegisterSuccess(r)}),(function(t){return e.onRegisterFailure(t,r)})))})),Q($(e),"redirectToEmailCollect",(function(t,n,o,r){var i=e.props.country;e.props.history.push({pathname:"/signup/fbemailcollect/",state:{signupOptions:t,isGDPREUCountry:(0,R.NN)(i),country:i,includeAgeStep:e.includeAgeStep("facebook",t)}})})),Q($(e),"redirectToLineEmailCollect",(function(t){e.props.history.push({pathname:"/signup/line-email-collect/",state:{signupOptions:t}})})),Q($(e),"includeAgeStep",(function(t,n){var o=e.props,r=o.country,i=o.activateMobileObligatoryAgeExp,a=o.deviceType,s=o.flushExp,c="facebook"!==t||!n.birthday,u=(0,R.NN)(r),l=D.rT.includes(r),p=D.ZR.has(r),d=u||l||p||"desktop"!==a&&i().anyEnabled;return s(),d&&(c||!(0,I.h)(n.birthday||"",18))})),Q($(e),"handleFacebookError",(function(){var t=e.props.fbConnectHandler;t&&t("error"),e.props.showToast((function(t){var n=t.onHide;return(0,_.jsx)(S.ZP,{text:e.props.i18n._("Unable to connect to Facebook","Error logging on with Facebook","Error logging on with Facebook"),onHide:n})}))})),Q($(e),"handleLineError",(function(){e.props.showToast((function(t){var n=t.onHide;return(0,_.jsx)(S.ZP,{text:e.props.i18n._("Unable to connect to Line","Error logging on with Line","Error logging on with Line"),onHide:n})}))})),Q($(e),"handleSignupTouch",(function(t){var n=t.event,o=e.props,r=o.from,i=o.history,a=o.isBusiness,s=o.next,c=o.onSignupTouch,u=o.setLoginSignupFrom,l=o.location,p=o.isRedirectToNextParamAfterSignup;n&&(n.stopPropagation(),n.preventDefault()),(0,m.NC)("press_email_signup"),(0,m.LW)({action:"click",page_location:l,item:"continue-email-button"}),c&&c(),r&&u(r),e.trackButtonTap(31),i.push({pathname:a?"/business/signup/step1/":"/signup/step1/",search:l.search,state:{next:s,isRedirectToNextParamAfterSignup:p}})})),Q($(e),"handleLoginTouch",(function(t){var n=t.event,o=e.props,r=o.isBusiness,i=o.footerCTA,a=o.from,s=o.history,c=o.next,u=o.onLoginTouch,l=o.location,p=o.isRedirectToNextParamAfterSignup;n.stopPropagation(),n.preventDefault(),u&&u(),a&&e.props.setLoginSignupFrom(a),(0,m.LW)({action:"click",page_location:l,item:"login-button"}),e.trackButtonTap(30);var d=i||"button";(0,m.My)("unauth_mweb.login_buttons.footer.".concat(d)),(0,m.NC)("press_login"),s.push({pathname:r?"/business/login/":"/login/",search:l.search,state:{next:c,isRedirectToNextParamAfterSignup:p}})})),Q($(e),"handleGoogleTouch",(function(){var t=e.props,n=t.onGoogleTouch,o=t.location;n&&n(),(0,m.LW)({action:"click",page_location:o,item:"continue-google-button"}),e.trackButtonTap(208)})),Q($(e),"handleFacebookTouch",(function(){var t=e.props,n=t.onFacebookTouch,o=t.location;n&&n(),(0,m.LW)({action:"click",page_location:o,item:"continue-facebook-button"}),e.trackButtonTap(68)})),Q($(e),"handleLineTouch",(function(){e.trackButtonTap(12277),(0,m.LW)({action:"click",page_location:e.props.location,item:"continue-line-button"})})),Q($(e),"login",(function(t){return function(n,o){var r=e.props,i=r.fbConnectHandler,a=r.history,s=r.login,c=r.next,u=r.location,l=r.noImmediateRedirect,p="google"===t?"gsi_btn":"other",d=u.state&&u.state.switch_account?{switchAccount:!0,trigger:p}:{noImmediateRedirect:l,trigger:p};"facebook"===t&&i&&i("success"),(0,m.NC)(t+"_login_success"),e.trackSignupLoginEvent(7534,t),s(n,a,c,d).then((function(){e.trackSignupLoginEvent(7536,t)})).catch((function(r){e.trackSignupLoginEvent(7535,t),e.onLoginError(n,r,o,t)})),e.setState({isLoading:!0,showRegisterLoading:!1,signupPlatform:t})}})),Q($(e),"renderRegularButtons",(function(){var t=e.props,n=t.isBusiness,r=t.locale,a=t.googleText,c=t.facebookText,u=t.lineText,l=t.showEmailButton,p=t.fbButtonType,d=t.isRerequest,f=t.isAuthenticated,g=t.showEmailButtonAsSecondary,h=t.showSecondGoogleButton,b=e.props.i18n._("Continue with email","Sign up button","Sign up button"),m=2;return n&&(b=e.props.i18n._("Create account","Button text for creating a business account","Button text for creating a business account"),m=-2),(0,_.jsxs)(o.Fragment,{children:[l&&(0,_.jsx)(v.xu,{"data-test-id":"continue-email-button",marginBottom:m,children:(0,_.jsx)(v.zx,{fullWidth:!0,color:g?"gray":"red",text:b,onClick:e.handleSignupTouch})}),c&&(0,_.jsx)(v.xu,{marginBottom:2,"data-test-id":"continue-facebook-button",children:(0,_.jsx)(i.Z,{buttonText:c,locale:r,onFacebookConnectError:e.handleFacebookError,onFacebookConnectSuccess:e.login("facebook"),type:p,fbUseContinueAs:e.props.fbUseContinueAs,onTouch:e.handleFacebookTouch,isRerequest:d})}),a&&(0,_.jsx)(v.xu,{marginBottom:2,"data-test-id":"continue-google-button",children:(0,_.jsx)(s.Z,{buttonText:a,isAuthenticated:f,showSecondGoogleButton:h,onGoogleConnectSuccess:e.login("google"),onTouch:e.handleGoogleTouch})}),u&&(0,_.jsx)(v.xu,{marginBottom:2,"data-test-id":"continue-line-button",children:(0,_.jsx)(j,{buttonText:u,onLineConnectError:e.handleLineError,onLineConnectSuccess:e.login("line"),onTouch:e.handleLineTouch})})]})})),e}return t=l,(n=[{key:"renderFooterCTA",value:function(){var e=this,t=this.props,n=t.footerCTA,o=t.increasedSpaceBelow,r=t.isMobileHomepage,i=t.removeLoginContainerPaddingY,a=t.textIsDark;return"member_link"===n?(0,_.jsx)(v.xu,{marginTop:-4,"data-test-id":"login-member",children:(0,_.jsx)(c.Z,{pressState:"none",onTouch:function(t){return e.handleLoginTouch({event:t})},children:(0,_.jsx)(v.xu,{paddingY:i?0:4,marginBottom:o?-1:-2,children:(0,_.jsx)(v.xv,{align:"center",size:"md",weight:"bold",color:r&&!a?"white":"darkGray",children:this.props.i18n._("Already a member? Log in","Link on mobile web sign up modal to direct unauth users to the login page","Link on mobile web sign up modal to direct unauth users to the login page")})})})}):"not_you_link"===n?(0,_.jsx)(v.xu,{marginTop:-3,"data-test-id":"LoginButtonsNotYoucontainer",children:(0,_.jsx)(c.Z,{pressState:"none",onTouch:function(t){return e.handleLoginTouch({event:t})},children:(0,_.jsxs)(v.xv,{size:"md",inline:!0,color:"default",children:[this.props.i18n._("Not you? ","Text for if the user is shown the wrong Facebook profile image for their account","Text for if the user is shown the wrong Facebook profile image for their account"),(0,_.jsx)(v.xv,{color:"default",inline:!0,size:"md",weight:"bold",children:this.props.i18n._("Log in as a different user.","Clickable text that takes the user to the login page","Clickable text that takes the user to the login page")})]})})}):(0,_.jsx)(v.xu,{marginBottom:5,"data-test-id":"login-button",children:(0,_.jsx)(v.zx,{fullWidth:!0,color:"transparent",onClick:this.handleLoginTouch,text:this.props.i18n._("Log in","Login page button","Login page button")})})}},{key:"renderRoundedButtons",value:function(){var e=this.props,t=e.locale,n=e.fbButtonType,o=e.isRerequest;return(0,_.jsxs)(v.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,_.jsx)(v.xu,{marginBottom:4,children:(0,_.jsx)(v.xv,{align:"center",color:"inverse",size:"md",children:this.props.i18n._("Sign up to get started","Sign up CTA","Sign up CTA")})}),(0,_.jsxs)(v.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[(0,_.jsxs)(v.xu,{"data-test-id":"signup-button",rounding:"circle",display:"flex",direction:"column",alignItems:"center",marginBottom:4,marginEnd:4,children:[(0,_.jsx)("button",{onClick:this.handleSignupTouch,style:{border:"none",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",height:"48px",width:"48px",marginBottom:"8px",borderRadius:"50%",cursor:"pointer"},type:"button",children:(0,_.jsx)(v.JO,{accessibilityLabel:this.props.i18n._("Continue with email","Sign up with email button","Sign up with email button"),icon:"gmail",color:"darkGray",inline:!0,size:16})}),(0,_.jsx)(v.xv,{color:"inverse",size:"md",children:this.props.i18n._("Email","Icon text for continuing with email","Icon text for continuing with email")})]}),(0,_.jsx)(v.xu,{marginEnd:4,children:(0,_.jsx)(i.Z,{locale:t,onFacebookConnectError:this.handleFacebookError,onFacebookConnectSuccess:this.login("facebook"),type:n,fbUseContinueAs:this.props.fbUseContinueAs,onTouch:this.handleFacebookTouch,isRerequest:o,isRounded:!0})}),(0,_.jsx)(s.Z,{onGoogleConnectSuccess:this.login("google"),onTouch:this.handleGoogleTouch,isRounded:!0})]})]})}},{key:"render",value:function(){var e=this.props,t=e.isBusiness,n=e.showTextDivider,o=e.roundButtons,r=e.showLoginButtons,i=e.secondaryAccountFlowEnabled,s=this.state,c=s.showRegisterLoading,u=s.isLoading,l=s.signupPlatform,p=t?i?6:-5:0;return(0,_.jsxs)(v.xu,{marginTop:p,maxWidth:400,marginStart:"auto",marginEnd:"auto","data-test-id":"LoginButtonsContainer",children:[n&&(0,_.jsx)(v.xu,{marginBottom:3,marginTop:3,children:(0,_.jsx)(v.xv,{align:"center",size:"sm",weight:"bold",children:this.props.i18n._("OR","Separator for email login button and social login button","Separator for email login button and social login button")})}),(0,_.jsx)(v.xu,{marginBottom:6,children:o?this.renderRoundedButtons():this.renderRegularButtons()}),r&&this.renderFooterCTA(),u&&(c?(0,_.jsx)(T.Z,{platform:"line"===l?"default":l}):(0,_.jsx)(a.Z,{}))]})}}])&&q(t.prototype,n),r&&q(t,r),l}(o.PureComponent);Q(X,"defaultProps",{next:"/",fbUseContinueAs:!0,footerCTA:"button"});var ee=(0,O.compose)(z.EN,(0,r.connect)((function(e,t){var n=e.session,o=e.users,r=void 0===o?{}:o;return{country:n.country,locale:n.locale,isAuthenticated:n.isAuthenticated,isLimitedLoginUser:(0,C.xT)(r[n.userId]),isTablet:n.isTablet}}),(function(){return{}})))((function(e){var t=(0,h.ZP)(),n=(0,N.F9)().showToast,i=(0,r.useDispatch)(),a=e.showEmailButton,s=e.showLoginButtons,c=(0,F.U)(),u=(0,y.tc)("mweb_unauth_signup_confirmation"),l=(0,x.B)().experiments,p=(0,E.ZP)(),d=(0,y.tc)("mweb_unauth_signup_obligatory_age");return(0,o.useEffect)((function(){c&&(s&&c.load(new URL("login.js","file://")),a&&c.load(new URL("signup.js","file://")))}),[]),(0,_.jsx)(X,W(W({},e),{},{i18n:t,isSignupConfirmationExpEnabled:u,login:function(e,t,n,o){return i((0,P.x4)(e,t,n,o))},register:function(e){return i((0,B.z)(e))},setLoginSignupFrom:function(e){return i((0,A.rm)(e))},showToast:n,activateMobileObligatoryAgeExp:d,deviceType:p,flushExp:function(){return l.flush()}}))}))},977816:function(e,t,n){"use strict";n.d(t,{$:function(){return p},GH:function(){return u},JF:function(){return m},Jb:function(){return g},a7:function(){return h},s0:function(){return b},sl:function(){return d},uP:function(){return y},we:function(){return f}});var o=n(578810),r=n(740049),i=n(720251);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="274266067164",l=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],p=["public_profile","email","user_birthday","user_friends"],d=function(e){e&&(0,r.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,r.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:u,status:!0,xfbml:!0,version:"v2.7"})):e&&(0,r.dy)({event:"global_object_not_found",provider:"facebook"})},f=function(e,t){return t&&(0,r.dy)({event:"load_script_start",provider:"facebook"}),(0,i.c5)((0,o.Z)(e),i.Jg.FACEBOOK).then((function(){return d(t)}))},g=function(){return new Promise((function(e){"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(o,r){if("connected"===e.status){n&&n("success");var i=e.authResponse,a={facebook_id:i.userID,facebook_token:i.accessToken,facebook_autologin:t.autologin||!1},c="/me?fields=".concat(l.join(","));window.FB.api(c,(function(e){o({creds:a,data:s(s(s({},e),a),e.picture&&!e.picture.data.is_silhouette?{image_url:e.picture.data.url}:{})})}))}else{var u=e.status||"unknown";n&&n("failure.".concat(u)),r({status:u})}}))},b=function(e,t){var n=e.data;e.isTrusted&&"string"==typeof n&&0===n.indexOf("_FB_")&&-1!==n.indexOf("type=login_button_dialog_open")&&t&&t("facebook_connect.login_button_dialog_open")},m=function(){return new Promise((function(e){window.FB.login(e,{scope:p.join(",")})})).then(h)},y=function(e){return new Promise((function(t,n){window.FB.api("/me/permissions",(function(o){var r=o.data;if(r){var i=r.find((function(t){return t.permission===e&&"granted"===t.status}));return t({hasPerm:!!i})}return n(Error("Failed to call facebook to get permission"))}))}))}},578810:function(e,t){"use strict";t.Z=function(e){return"//connect.facebook.net/".concat(function(e){var t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}}(e),"/sdk.js")}},958140:function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((function(){return t[Math.floor(Math.random()*t.length)]})).join("")}n.d(t,{Z:function(){return o}})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61230-cf874dacb43e6935.js.map